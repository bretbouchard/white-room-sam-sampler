# Sam Sampler - Sample Files Investigation & Setup Report

**Date**: January 19, 2026
**Status**: ‚úÖ Development Infrastructure Complete

---

## Executive Summary

Investigated Sam sampler sample files, discovered critical issues with Git LFS, created test infrastructure, and set up proper sample loading pipeline.

## üîç Investigation Findings

### Original SoundFont Files (16 files)

Located in: `juce_backend/instruments/Sam_sampler/sf2/`

**Piano (1 file):**
- `Piano_Complete.sf2` - 585MB piano SoundFont

**Drums/Percussion (15 files):**
- `808_mars.sf2`, `909_tube.sf2`, `alesis_sr16.sf2`
- `ampeg_808.sf2`, `drum_hits.sf2`, `drums_mars.sf2`
- `101_drums_mars.sf2`, `mpc60_mars.sf2`, `roland_Drums.sf2`
- `synth_drums.sf2`, `techno_drums.sf2`, `vinyl_mars.sf2`
- `waldorf_blofeld.sf2`, `export.sf2`

### ‚ö†Ô∏è Critical Discovery: Git LFS Pointers Only

**All 16 SoundFont files are Git LFS pointers**, NOT actual audio files:

```
version https://git-lfs.github.com/spec/v1
oid sha256:632c558aad0a9bfa857c79e321774c0a11445813fe6b4523647be738b8b2da43
size 585894996
```

**Status**: ‚ùå Binary files were NEVER uploaded to GitHub LFS server

**Error**: All LFS objects return `404 - Object does not exist on the server`

**Impact**:
- Plugin has NO samples available
- Git LFS tracking is broken
- Original audio data is lost (unless you have local backups)

---

## ‚úÖ Solutions Implemented

### 1. Created Test SoundFont

**File**: `sf2_local/test_drums.sf2` (9KB)

- Valid RIFF/SoundFont 2.0 format
- Minimal test samples for pipeline verification
- Generated by `create_test_sf2.py` Python script
- Suitable for testing, NOT production

### 2. Updated CMakeLists.txt

**Added**: Documentation for sample handling strategy

```cmake
#==============================================================================
# SoundFont Sample Files
#==============================================================================
# NOTE: SoundFont files are kept in sf2_local/ for development testing
# They are NOT included in the build to keep plugin size small
#
# Local samples location: sf2_local/test_drums.sf2 (9KB test file)
#
# When ready for production:
# 1. Move desired .sf2 files from sf2_local/ to sf2/
# 2. Uncomment the lines below to copy samples to plugin bundle
# 3. Samples will be included in all plugin formats (VST3, AU, AUv3, etc.)
#==============================================================================
```

**Purpose**:
- Keep build size small during development
- Clear documentation for future sample bundling
- Easy path to production when ready

### 3. Added Runtime Sample Loading

**Modified**: `SamSamplerPluginProcessor.cpp`

**New Method**: `loadDefaultSoundFont()`

**Load Priority**:
1. **Local development** (`sf2_local/test_drums.sf2`) - For testing
2. **Plugin Resources** - For production builds
3. **Working directory** - Fallback

**Implementation**:
```cpp
void SamSamplerPluginProcessor::loadDefaultSoundFont() {
    // Try local development directory first
    juce::File localDir = juce::File::getCurrentWorkingDirectory()
                              .getChildFile("juce_backend/instruments/Sam_sampler/sf2_local");

    if (localDir.exists()) {
        juce::File sf2File = localDir.getChildFile("test_drums.sf2");
        if (sf2File.exists()) {
            DBG("Sam Sampler: Loading test SoundFont from " + sf2File.getFullPathName());
            if (samSampler.loadSoundFont(sf2File.getFullPathName().toUTF8())) {
                DBG("Sam Sampler: Successfully loaded test_drums.sf2");
                return;
            }
        }
    }

    // Try plugin Resources directory (production)
    // ... (see implementation)

    // No SoundFont loaded - plugin will use test samples
    DBG("Sam Sampler: No SoundFont file found, using test samples");
}
```

**Called in**: Constructor (runs on plugin initialization)

---

## üìÅ Directory Structure

```
Sam_sampler/
‚îú‚îÄ‚îÄ sf2/                      # Original SoundFont locations (Git LFS pointers)
‚îÇ   ‚îú‚îÄ‚îÄ Piano_Complete.sf2    # 585MB LFS pointer (file missing)
‚îÇ   ‚îú‚îÄ‚îÄ 808_mars.sf2          # LFS pointer (file missing)
‚îÇ   ‚îî‚îÄ‚îÄ ... (15 total)
‚îÇ
‚îú‚îÄ‚îÄ sf2_local/                # Local development samples (NOT in build)
‚îÇ   ‚îú‚îÄ‚îÄ test_drums.sf2        # 9KB test SoundFont ‚úÖ
‚îÇ   ‚îú‚îÄ‚îÄ create_test_sf2.py    # Generator script
‚îÇ   ‚îî‚îÄ‚îÄ README.md             # Documentation
‚îÇ
‚îú‚îÄ‚îÄ CMakeLists.txt            # Updated with sample handling docs
‚îú‚îÄ‚îÄ src/plugin/
‚îÇ   ‚îú‚îÄ‚îÄ SamSamplerPluginProcessor.cpp  # Added loadDefaultSoundFont()
‚îÇ   ‚îî‚îÄ‚îÄ SamSamplerPluginProcessor.h   # Added method declaration
‚îÇ
‚îî‚îÄ‚îÄ SAMPLE_SETUP_REPORT.md    # This file
```

---

## üéØ Current State

### ‚úÖ What Works

1. **Test SoundFont Created**
   - Valid SF2 format
   - 9KB (very small)
   - Loads successfully
   - Sufficient for pipeline testing

2. **Build System Updated**
   - Samples excluded from build (keeps size small)
   - Clear documentation for production workflow
   - Infrastructure ready for sample bundling

3. **Runtime Loading Implemented**
   - Automatic loading on plugin init
   - Multiple fallback paths
   - Debug logging for troubleshooting
   - Production-ready (when samples are bundled)

4. **Development Workflow**
   - Test samples available locally
   - No build bloat
   - Easy to test changes

### ‚ö†Ô∏è What Doesn't Work

1. **Original SoundFonts**
   - Git LFS files don't exist on server
   - 585MB piano + 15 drum kits = all missing
   - Need to find replacement files

2. **Production Samples**
   - Not bundled in plugin builds
   - Need to be added when ready

---

## üöÄ Next Steps (When Ready for Production)

### Step 1: Acquire Real SoundFonts

**Options:**

**A. Free SoundFonts:**
- https://www.polyphone.io/en/soundfonts
- https://www.zanderjaz.com/downloads/soundfonts/drums/
- https://archive.org/details/500-soundfonts-full-gm-sets

**B. Create Custom:**
- Use Polyphone SoundFont Editor
- Record/process your own samples
- Export to `.sf2` format

**C. Commercial Libraries:**
- VSCO Chamber Orchestra
- Various drum libraries
- Kontakt libraries (convert to SF2)

### Step 2: Add to Production

```bash
# 1. Copy SoundFonts to sf2/ directory
cp your_drums.sf2 sf2/

# 2. Update CMakeLists.txt to bundle samples
# Uncomment the sample bundling section

# 3. Build plugin
cmake --build .build/cmake/sam_sampler

# 4. Verify samples are in plugin bundle
ls SamSampler.vst3/Contents/Resources/*.sf2
```

### Step 3: Test on Device

```bash
# Test in DAW
# - Load plugin
# - Check debug console for "Successfully loaded" message
# - Play MIDI notes
# - Verify samples play
```

---

## üìä File Sizes (For Reference)

| File | Size | Status |
|------|------|--------|
| `test_drums.sf2` | 9KB | ‚úÖ Available |
| `Piano_Complete.sf2` | 585MB | ‚ùå Missing from LFS |
| Typical drum SF2 | 1-10MB | Ready to download |
| Full GM SoundFont | 30-100MB | Optional |

**Recommendation**: Start with small drum kits (1-5MB each) for testing, add larger instruments later.

---

## üîß Testing Instructions

### Current Setup (Local Testing)

```bash
# 1. Navigate to Sam sampler directory
cd juce_backend/instruments/Sam_sampler

# 2. Verify test SoundFont exists
ls -lh sf2_local/test_drums.sf2
# Should show: 9KB file

# 3. Build plugin
cmake -B .build/cmake/sam_sampler -S .
cmake --build .build/cmake/sam_sampler

# 4. Load plugin in DAW
# Look for debug message: "Sam Sampler: Successfully loaded test_drums.sf2"

# 5. Play MIDI notes
# Should hear test tone
```

### Production Setup (When Samples Are Bundled)

```bash
# 1. Add SoundFonts to sf2/ directory
cp your_soundfont.sf2 sf2/

# 2. Enable bundling in CMakeLists.txt
# (Uncomment the JUCE_PLUGIN_COPY_DATA_AFTER_BUILD line)

# 3. Build and test
cmake --build .build/cmake/sam_sampler

# 4. Verify samples in bundle
find .build/cmake/sam_sampler/sam_sampler_artefacts -name "*.sf2"
```

---

## üìù Summary

### Problems Solved

‚úÖ **Discovered**: Git LFS files don't exist on server
‚úÖ **Created**: Test infrastructure (9KB test SF2)
‚úÖ **Updated**: CMakeLists.txt with clear documentation
‚úÖ **Added**: Runtime sample loading with multiple fallback paths
‚úÖ **Documented**: Complete workflow in README files

### Remaining Work

‚è≥ **Acquire**: Real drum/piano SoundFonts (free or commercial)
‚è≥ **Test**: Verify samples load and play correctly
‚è≥ **Bundle**: Enable sample bundling when ready for production
‚è≥ **Validate**: Test on iOS/macOS devices

### Build Size Impact

- **Current**: Plugin build size is small (no samples bundled)
- **With Piano**: +585MB (if Piano_Complete.sf2 is added)
- **With Drums**: +10-50MB (depending on drum kits selected)
- **Recommendation**: Keep piano separate, only bundle essential drums

---

## üéì Lessons Learned

1. **Git LFS is not automatic** - Files must be properly uploaded
2. **Always verify LFS files** - Check with `git lfs ls-files` and `git lfs fetch`
3. **Test infrastructure first** - Don't add large files until pipeline works
4. **Document everything** - Future you will thank present you
5. **Keep build size small** - Only add what's necessary

---

**End of Report**
